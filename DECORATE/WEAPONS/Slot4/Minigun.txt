



//Changes made:
//select,deselect
ACTOR MiniGun : BrutalWeapon
{
	Game Doom
	SpawnID 28
	Weapon.SelectionOrder 700
	Weapon.AmmoType1 "Clip2"
	Weapon.AmmoType2 "MiniGunCount"
	Weapon.AmmoGive 0
	Weapon.AmmoUse1 0
	+WEAPON.NOAUTOAIM
	+WEAPON.NOAUTOFIRE
	+WEAPON.AMMO_OPTIONAL
	+WEAPON.ALT_AMMO_OPTIONAL
	+FORCEXYBILLBOARD
	Inventory.PickupSound "CBOXPKUP"
	Inventory.PickupMessage "You got the Minigun! (Slot 4)"
	Obituary "%o was mowed down by %k's Minigun."
	AttackSound "none"
	Scale 0.9
	Inventory.AltHUDIcon "MGUNA0"
	BrutalWeapon.weight 9
	States
	{
	
	GrenadeThrowFlash:
	CHGS BCDE 1
	TNT1 A 24
	CHGS EDCB 1//32 in total
	stop
	
	KickingFlash:
	    CHAG A 0 A_JumpIfInventory("Clip2",1,1)
		Goto KickNoAmmo
		CHAG A 0 A_JumpIfInventory("Spin",1,"KickSpin")
	    CHAG EFGHIIIIIIIIHGFE 1 //16
	    Goto Ready
	KickNoAmmo:
	    CHAG JKLMNNNNNNNNMLKJ 1 //16
	    Goto Ready
	KickSpin:
		CHAG OPQR 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG STUV 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG STUV 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG WXYZ 1 //16
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
	    Goto Ready
		
     AirKickingFlash:
	    CHAG A 0 A_JumpIfInventory("Clip2",1,1)
		Goto AirKickNoAmmo
		CHAG A 0 A_JumpIfInventory("Spin",1,"AirKickSpin")
	    CHAG EFGHIIIIIIIIIIHGFE 1 //18
	    Goto Ready
	AirKickNoAmmo:
	    CHAG JKLMNNNNNNNNNNMLKJ 1 //18
	    Goto Ready
	AirKickSpin:
	    CHAG OPQR 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG STUV 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG STUV 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG STWX 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG YZ 1 //18
	    Goto Ready
		
	SlideKickingStart:
	    CHAG A 0 A_JumpIfInventory("Clip2",1,1)
		Goto SlideStartNoAmmo
		CHAG A 0 A_JumpIfInventory("Spin",1,"SlideStartSpin")
	    CHAG EFGHI 1
	    CHAG IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII 1 { //39 total
			if (CountInv("Kicking") == 0) {
				return state("SlideKickingEnd");
			}
			return state("");
		}
		Goto Ready
		
	SlideStartNoAmmo:
	    CHAG JKLMN 1
	    CHAG NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN 1 { //39 total
			if (CountInv("Kicking") == 0) {
				return state("SlideKickingEnd");
			}
			return state("");
		}
		Goto Ready
	SlideStartSpin:
	    CHAG OPQR 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		TNT1 A 0 A_AlertMonsters(400)
		TNT1 A 0 A_StopSound(5)
		CHAG A 0 A_PlaySound("CHAINSPI")
	    CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
        CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1 { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1  { if (CountInv("Kicking") == 0) {return state("SlideKickingEnd");}return state("");}
		//39 total
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
	    Goto Ready

	 SlideKickingEnd:
	    CHAG A 0 A_JumpIfInventory("Clip2",1,1)
		Goto SlideEndNoAmmo
		CHAG A 0 A_JumpIfInventory("Spin",1,"SlideEndSpin")
	    CHAG IIIIIIHGFE 1 //10
	    Goto Ready
	SlideEndNoAmmo:
	    CHAG NNNNNNMLKJ 1 //10
	    Goto Ready
	SlideEndSpin:
	    CHAG UV 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI")
		CHAG STUV 1
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG WXYZ 1 //10
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
	    Goto Ready
		
	FuckYouFlash:
	CHAG A 0 A_JumpIfInventory("Clip2",1,1)
    Goto FuckYouFlashNoAmmo
	CHAG A 0 A_JumpIfInventory("Spin",1,"FuckYouSpin")
	CHAG EFGHIIIIIIIIIIIIIIIIIIIIIIHGFE 1 //18
	stop
	
	FuckYouFlashNoAmmo:
	CHAG JKLMNNNNNNNNNNNNNNNNNNNNNNMLKJ 1 //28
	stop
		
	FuckYouSpin:
	CHAG OPQR 1 //4
	CHAG A 0 A_AlertMonsters(400)
	CHAG A 0 A_PlaySound("CHAINSPI", 5)
	CHAG STUV 1
	CHAG A 0 A_AlertMonsters(400)
	CHAG A 0 A_PlaySound("CHAINSPI", 5)
	CHAG STUV 1
	CHAG A 0 A_AlertMonsters(400)
	CHAG A 0 A_PlaySound("CHAINSPI", 5)
	CHAG STUV 1
	CHAG A 0 A_AlertMonsters(400)
	CHAG A 0 A_PlaySound("CHAINSPI", 5)
	CHAG STUV 1
	CHAG A 0 A_AlertMonsters(400)
	CHAG A 0 A_PlaySound("CHAINSPI", 5)
	CHAG STUVST 1
	CHAG A 0 A_AlertMonsters(400)
	CHAG A 0 A_PlaySound("CHAINSPI", 5)
	CHAG WXYZ 1 //4
	stop	
		
	Reload:
		XXXX X 0 A_PlaySound("PISTFOL5", 10)
	   CHAF EFGH 1 A_WeaponReady
	   CHAF I 7 A_WeaponReady
	  // CHAG A 0 A_PlaySound("CHAINSTO", 6)
	  CHAG A 0 A_PlaySound("CHAINSTO") XXXX X 0 A_StartSound("foley/MinigunInspectRotor", 10,0,0.9)
	   TNT1 A 0 A_TakeInventory("Reloading",1)
	   CHAF HJKL 1 A_WeaponReady
//	CHAG A 0 {if (CountInv("Kicking") == 1) { if (CountInv("IsCrouching") == 1) { return state("SlideKickingStart");	} if (momZ != 0) {	return state("AirKickingFlash");}else {	return state("KickingFlash");}	}return state("");}
	CHAG A 0 A_JumpIfInventory("Reloading",1,"Fidget")
	CHAG A 0 A_WeaponReady(WRF_ALLOWRELOAD)
	CHAG A 0 A_JumpIfInventory("Salute1", 1, "Salute")
	CHAG A 0 A_JumpIfInventory("Salute2", 1, "Salute")
	CHAG A 0 A_JumpIfInventory("Taunting",1,"Taunt")
	CHAG A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
    CHAG A 0 A_checksprint
	   CHAG AABBCCDDAAABBBCCCDDD 1
	   {
			A_WeaponReady(WRF_ALLOWRELOAD);
			if (CountInv("Clip2") == 0) { return state("Ready2Empty"); }
			if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
			if (CountInv("Taunting") == 1) { return state("Taunt"); }
			if (CountInv("Reloading") == 1) { return state("Reload"); }
			if (CountInv("Unloading") == 1) { return state("Unload"); }
			if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
			A_checksprint;
			if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
									
			if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}

			if (CountInv("StartDualWield") == 1) { return state("DualWield"); }
			return state("");
		}
	   TNT1 A 0 A_TakeInventory("Reloading",1)
	   Goto Ready
			
		
	Spawn:
		MGUN A 1
		MGUN A -1
		Stop
		
		 Ready: 
		 Ready3:
		  CHAG A 0 A_JumpIfInventory("swapriflespecial",1,"PlaceTurret")
		 TNT1 A 0 A_JumpIf(CountInv("Clip2") == 0, "IdleNoAmmo")
		 CHAG A 0 A_JumpIfInventory("Spin",1,"Ready2")
		  CHAG A 0 {if (CountInv("Kicking") == 1) { if (CountInv("IsCrouching") == 1) { return state("SlideKickingStart");	} if (momZ != 0) {	return state("AirKickingFlash");}else {	return state("KickingFlash");}	}return state("");}
		  CHAG A 0 A_JumpIfInventory("Salute1", 1, "Salute")
		  CHAG A 0 A_JumpIfInventory("Salute2", 1, "Salute")
		  CHAG A 0 A_JumpIfInventory("Taunting",1,"Taunt")
		  CHAG A 1 A_WeaponReadyDX(WRF_ALLOWRELOAD)
		  CHAG A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		  CHAG A 0 A_JumpIfInventory("StartDualWield",1,"DualWield")
		 
		  CHAG A 0 A_checksprint
			
		  CHAG A 0 A_JumpIfInventory("Reloading",1,"Reload")
	//	  CHAG A 0 A_JumpIfInventory("Clip2",1,"Ready")
	//	  Goto IdleNoAmmo
		  loop
		  
		 IdleNoAmmo:
		  CHAE A 1 A_WeaponReady
		  CHAG A 0 A_TakeInventory ("Spin",1)
		  CHAG A 0 A_JumpIfInventory("Clip2",1,"Ready")
		  CHAG A 0 {if (CountInv("Kicking") == 1) { if (CountInv("IsCrouching") == 1) { return state("SlideKickingStart");	} if (momZ != 0) {	return state("AirKickingFlash");}else {	return state("KickingFlash");}	}return state("");}
		  CHAG A 0 A_JumpIfInventory("Taunting",1,"Taunt")
		  CHAG A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		  CHAG A 0 A_JumpIfInventory("StartDualWield",1,"DualWield")
		  Loop

	Ready2:
	    CHAG A 0 A_PlaySound("CHAINSPI", 5)
	    CHAG ABCD 1 
		{
			A_WeaponReady(WRF_ALLOWRELOAD);
			if (CountInv("Clip2") == 0) { return state("Ready2Empty"); }
			if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
			if (CountInv("Taunting") == 1) { return state("Taunt"); }
			if (CountInv("Reloading") == 1) { return state("Reload"); }
			if (CountInv("Unloading") == 1) { return state("Unload"); }
			if (CountInv("swapriflespecial") == 1) { return state("placeturret"); }
			if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
			A_checksprint;
			if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
									
			if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}

			if (CountInv("StartDualWield") == 1) { return state("DualWield"); }
		//	if (CountInv("FiredPrimary") == 1) { return state("Fire"); }
			return state("");
		}
		Loop
		
	Ready2Empty:
	    CHAG A 0 A_PlaySound("CHAINSPI", 5)
	    CHAE ABCD 1 
		{
			A_WeaponReady(WRF_ALLOWRELOAD);
			if (CountInv("Clip2") >> 0) { return state("Ready2"); }
			if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
			if (CountInv("Taunting") == 1) { return state("Taunt"); }
			if (CountInv("Reloading") == 1) { return state("Reload"); }
			if (CountInv("Unloading") == 1) { return state("Unload"); }
			if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
			A_checksprint;
			if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
			if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			if (CountInv("StartDualWield") == 1) { return state("DualWield"); }
		//	if (CountInv("FiredPrimary") == 1) { return state("Fire"); }
			return state("");
		}
		Loop
		
		  

		
	SprintOverlay:
	    CHAG A 0 A_JumpIfInventory("Clip2",1,1)
		Goto Sprintnoammo
		CHAG A 0 A_JumpIfInventory("Spin",1,"SprintSpin")
	    CHAG EFGH 1 //16
		CHAG I 1
	    wait
	SprintNoAmmo:
	    CHAG JKLM 1 //16
		CHAG N 1
	    Wait
	SprintSpin:
		CHAG OPQR 1
		SprintSpin2:
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
		CHAG STUV 1
		LOOP
		
		ReturnFromSprint:
		CHAG A 0 A_JumpIfInventory("Clip2",1,1)
		Goto ReturnFromSprintnoammo
		CHAG A 0 A_JumpIfInventory("Spin",1,"ReturnFromSprintSpin")
		CHAG HGFE 1
		Goto ready
		
		Returnfromsprintnoammo:
		CHAG MLKJ 1
		Goto ready
		
		
		ReturnFromSprintSpin:
		CHAG WXYZ 1 //16
		CHAG A 0 A_AlertMonsters(400)
		CHAG A 0 A_PlaySound("CHAINSPI", 5)
	    Goto Ready
		
		

		Deselect: "####" A 0 A_TakeInventory("IsPlayingDoxMod",1)
			CHAG A 0 A_TakeInventory ("Spin",1)
			CHAG A 0 A_TakeInventory("TossGrenade", 1)
			CHAG A 0 A_Takeinventory("HeavyAutomaticWeapon",1)
			CHAG A 0 A_TakeInventory("RandomHeadExploder", 1)
			CHAG A 0 SetPlayerProperty(0,0,0)
			"####" A 0 A_ClearOverlays(-2,-2)
			CHAG A 0 A_StopSound(5)
			TNT1 A 0 A_JumpIfInventory("SwitchingDualModes", 1,"DeselectForNailgun")
			TNT1 A 0 A_JumpIf(Countinv("NailgunModuleSelected")==1,"DeselectForNailgun")
			CHAG A 0 A_JumpIfInventory("Clip2",1,"DecelectButHasAmmo")
			CHGS ABCDE 1
			TNT1 AAAAAAAAAAAAAAAAAA 0 A_Lower
			TNT1 A 1 A_Lower
			Wait
        DecelectButHasAmmo:
		    CHGS FGCDE 1
			TNT1 AAAAAAAAAAAAAAAAAA 0 A_Lower
			TNT1 A 1 A_Lower
			Wait
 
        DeselectForNailgun:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
	    Wait

		Select:
			TNT1 A 0
			RIFG A 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("MinigunCrosshair"));}else{A_SetCrosshair(0);}}
			Goto SelectFirstPersonLegs
			SelectContinue: "####" A 0 A_GiveInventory("IsPlayingDoxMod",1) 
				
			CHAG A 0 A_Giveinventory("GoSpecial",1)
			CHAG A 0 A_Giveinventory("HeavyAutomaticWeapon",1)
			CHAG A 0 A_Giveinventory("MinigunSelected",1)
			CHAG A 0 A_GiveInventory("RandomHeadExploder", 1)
			CHAG A 0 A_JumpIfInventory("IsPlayingAsPurist", 1, "PuristGun")
			TNT1 A 0 A_JumpIfInventory("SwitchingDualModes",1,"SwitchToMinigun")
			TNT1 A 0 A_JumpIf(Countinv("NailgunModuleSelected")==1,"NailgunModeSelected")
			TNT1 A 1 A_Raise
			CHAG A 0 A_Giveinventory("GoSpecial",1)
			CHAG A 0 A_Giveinventory("HeavyAutomaticWeapon",1)
			CHAG A 0 A_Giveinventory("MinigunSelected",1)
			CHAG A 0 A_GiveInventory("RandomHeadExploder", 1)
			
			TNT1 AAAAAAAAAAAAAA 0 A_Raise
		
		SelectAnimation:
		ReturnFromNothing:
			CHAG A 0 A_PlaySound("CHGNPKUP")
			CHAG A 0 A_JumpIfInventory("GoFatality", 1, "Steady")
			CHAG A 0 A_JumpIfInventory("Clip2",1,"SelectButHasAmmo")
			CHGS EDCBA 1 A_WeaponReady(WRF_NOFIRE)
			RIFG A 0 A_Takeinventory("StartDualWield",1)
			Goto IdleNoAmmo
        SelectButHasAmmo:
		CHGS EDCGF 1 A_WeaponReady(WRF_NOFIRE)
		RIFG A 0 A_Takeinventory("StartDualWield",1)
		Goto Ready
         
        NailgunModeSelected:
		NULL A 0 A_GiveInventory("Nailgun",1)
		TNT1 A 0 A_SelectWeapon("Nailgun")
		Goto Ready
		
        SwitchToMinigun:
		    TNT1 AAAAAAAAAAAAAAA 0 A_Raise
			TNT1 A 0 A_PlaySound("MODULE2",1)
            5LGN H 1
			2LGN GHHHII 1
			5LGN III 1
			5LGN JKLM 1
			CHAG A 0 A_JumpIfInventory("Clip2",1,6)
			3LGN A 0 A_Takeinventory("StartDualWield",1)
            TNT1 A 0 A_TakeInventory("SwitchingDualModes", 1)
		    TNT1 A 0 A_TakeInventory("Unloading", 1)
		    TNT1 A 0 A_TakeInventory("Reloading", 1)
			Goto IdleNoAmmo
		    TNT1 A 0
			CHAE A 4
			5LGN NOP 1
			5LGN A 0 A_PlaySound("MINIBELT")
			5LGN QR 1
			5LGN S 3
			5LGN TUVWXY 1
			//5LGN
		    //NLGN F 5
		    //NLGN EDCBB 1
			RIFG A 0 A_Takeinventory("StartDualWield",1)
			TNT1 A 0 A_TakeInventory("SwitchingDualModes", 1)
            Goto Ready
 
		NoAmmo:
			CHAE A 10 A_PlaySound("weapons/empty")
			Goto IdleNoAmmo
			

       Fire:
	        TNT1 A 0 A_JumpIf(GetCvar("bd_LegacyMinigunFire")==1, "LegacyFire")
	        CHAG A 0 A_JumpIfInventory("Spin",1,"Hold")		
			CHAG A 0 A_PlaySound("CHAINSTA")
		NULL A 0 A_CheckIfAmmo("CLip2",1,"NoAmmoFire")
			CHAG A 0 A_PlaySound("CHGNSHOT", 1)
			CHAG A 0 A_PlaySound("FARMGN", 5)
			"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("Clip2")<=15) { A_PlaySound("MagClick", 7); }}}
			CHAG A 0 A_ZoomFactor(0.99)
			CHAG A 0 A_Firecustommissile("50CaseSpawn",0,0,-12,-18)
			CHAG A 0 A_SpawnItemEx("PlayerMuzzle2",30,5,27)
			TNT1 A 0 A_TakeAmmo("CLip2",1)
			TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles2", random(-12,12), 0, 0, -6, 0, random(-9,9))
			CHAF A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", random(-1,1), 0, 0, -12, 0, random(-2,2))
			CHAF M 1 BRIGHT A_FireBullets(1, 0.5, -1, 16, "MachineGunBulletPuff", FBF_NORANDOM | FBF_USEAMMO)
			CHAG A 0 A_ZoomFactor(1.0)
			CHAF NOPPP 1
			CHAG A 0 A_PlaySound("CHGNSHOT", 1)
			CHAG A 0 A_PlaySound("FARMGN", 5)
			"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("Clip2")<=15) { A_PlaySound("MagClick", 7); }}}
			CHAG A 0 A_ZoomFactor(0.99)
			CHAG A 0 A_Firecustommissile("50CaseSpawn",0,0,-12,-18)
			CHAG A 0 A_SpawnItemEx("PlayerMuzzle2",30,5,27)
			TNT1 A 0 A_TakeAmmo("CLip2",1)
			TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles2", random(-12,12), 0, 0, -6, 0, random(-9,9))
			CHAF A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", random(-1,1), 0, 0, -12, 0, random(-2,2))
			CHAF Q 1 BRIGHT A_FireBullets(1, 0.5, -1, 16, "MachineGunBulletPuff", FBF_NORANDOM | FBF_USEAMMO)
			CHAG A 0 A_ZoomFactor(1.0)
			CHAF RSTTT 1
			TNT1 A 0 A_ReFire("Fire2")
			CHAG A 0 A_PlaySound("CHAINSTO") XXXX X 0 A_StartSound("foley/MinigunInspectRotor", 10,0,0.9)
			Goto EndFire3
		Fire2:
		NULL A 0 A_CheckIfAmmo("CLip2",1,"NoAmmoFire2")
			CHAG A 0 A_PlaySound("CHGNSHOT", 1)
			CHAG A 0 A_PlaySound("FARMGN", 5)
			"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("Clip2")<=15) { A_PlaySound("MagClick", 7); }}}
			CHAG A 0 A_ZoomFactor(0.99)
			CHAG A 0 A_Firecustommissile("50CaseSpawn",0,0,-12,-18)
			CHAG A 0 A_SpawnItemEx("PlayerMuzzle2",30,5,27)
			TNT1 A 0 A_TakeAmmo("CLip2",1)
			TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles2", random(-12,12), 0, 0, -6, 0, random(-9,9))
			CHAF A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", random(-1,1), 0, 0, -12, 0, random(-2,2))
			CHAF M 1 BRIGHT A_FireBullets(3, 2, -1, 16, "MachineGunBulletPuff", FBF_NORANDOM | FBF_USEAMMO)
			CHAG A 0 A_ZoomFactor(1.0)
			TNT1 A 0 A_SetPitch(Pitch-0.1, SPF_INTERPOLATE)
			TNT1 A 0 A_SetAngle(angle + frandom(-0.2,0.2), SPF_INTERPOLATE)
			//TNT1 A 0 A_SetAngle(angle + frandom(-0.6,0.6), SPF_INTERPOLATE)
			CHAF NPP 1
			CHAG A 0 A_PlaySound("CHGNSHOT", 1)
			CHAG A 0 A_PlaySound("FARMGN", 5)
			"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("Clip2")<=15) { A_PlaySound("MagClick", 7); }}}
			CHAG A 0 A_ZoomFactor(0.99)
			CHAG A 0 A_Firecustommissile("50CaseSpawn",0,0,-12,-18)
			CHAG A 0 A_SpawnItemEx("PlayerMuzzle2",30,5,27)
			TNT1 A 0 A_TakeAmmo("CLip2",1)
			TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles2", random(-12,12), 0, 0, -6, 0, random(-9,9))
			CHAF A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", random(-1,1), 0, 0, -12, 0, random(-2,2))
			CHAF Q 1 BRIGHT A_FireBullets(3, 2, -1, 16, "MachineGunBulletPuff", FBF_NORANDOM | FBF_USEAMMO)
			CHAG A 0 A_ZoomFactor(1.0)
			TNT1 A 0 A_SetPitch(Pitch-0.15, SPF_INTERPOLATE)
			TNT1 A 0 A_SetAngle(angle + frandom(-0.4,0.4), SPF_INTERPOLATE)
			//TNT1 A 0 A_SetAngle(angle + frandom(-0.6,0.6), SPF_INTERPOLATE)
			CHAF RTT 1
			TNT1 A 0 A_ReFire("Hold")
			CHAG A 0 A_PlaySound("CHAINSTO") XXXX X 0 A_StartSound("foley/MinigunInspectRotor", 10,0,0.9)
			Goto EndFire2
		Hold:
		NULL A 0 A_CheckIfAmmo("CLip2",1,"NoAmmoHOld")
			CHAG A 0 A_PlaySound("CHGNSHOT", 1)
			CHAG A 0 A_PlaySound("FARMGN", 5)
			"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("Clip2")<=15) { A_PlaySound("MagClick", 7); }}}
			NULL A 0 A_WeaponOffset(random(-1,1),32+random(0,1) )
			CHAG A 0 A_ZoomFactor(0.99)
			TNT1 A 0 A_TakeAmmo("CLip2",1)
			CHAF A 1 BRIGHT A_FireBullets(5, 5, -1, 16, "MachineGunBulletPuff", FBF_NORANDOM | FBF_USEAMMO,8192,"decorativetracer",-12)
			TNT1 A 0 A_SetPitch(Pitch-0.2, SPF_INTERPOLATE)
			TNT1 A 0 A_SetAngle(angle + frandom(-0.6,0.6), SPF_INTERPOLATE)

			CHAG A 0 A_Firecustommissile("50CaseSpawn",0,0,-12,-18)
			CHAG A 0 A_SpawnItemEx("PlayerMuzzle2",30,5,27)
			TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles2", random(-12,12), 0, 0, -6, 0, random(-9,9))
			//CHAF A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", random(-2,2), 0, 0, -12, 0, random(-2,2))
			CHAG A 0 A_ZoomFactor(1.0)
			CHAG A 0 A_JumpIfInventory("IsTacticalClass", 1, 2)//Tactical mode skips a frame, fires faster
			CHAF B 1 A_SetPitch(Pitch-0.3, SPF_INTERPOLATE)
			CHAG A 0
			
			RIFG A 0 A_JumpIfInventory("IsNOTTacticalClass", 1, 2)//tactical mode has muzzle climb
			RIFG A 0 A_SetPitch(pitch-1.0, SPF_INTERPOLATE)
			RIFG A 0
			NULL A 0 A_WeaponOffset(0,32)
	NULL A 0 A_CheckIfAmmo("CLip2",1,"NoAmmoHOld2")
			CHAG A 0 A_PlaySound("CHGNSHOT", 1)
			CHAG A 0 A_PlaySound("FARMGN", 5)
			"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("Clip2")<=15) { A_PlaySound("MagClick", 7); }}}
			CHAG A 0 A_ZoomFactor(0.99)
			TNT1 A 0 A_TakeAmmo("CLip2",1)
			//TNT1 AA 0 A_FireCustomMissile("YellowFlareSpawn",0,0,0,0)
			//RIFF A 0 A_FireCustomMissile("GunFireSmoke", 0, 0, 0, -5, 0, 0)
			NULL A 0 A_WeaponOffset(random(-1,1),32+random(0,1) )
			CHAF C 1 BRIGHT A_FireBullets(5, 5, -1, 16, "MachineGunBulletPuff", FBF_NORANDOM | FBF_USEAMMO,8192,"decorativetracer",-12)
			TNT1 A 0 A_SetAngle(angle+frandom(-0.6,0.6), SPF_INTERPOLATE)
			TNT1 A 0 A_SetPitch(Pitch-0.2, SPF_INTERPOLATE)
			CHAG A 0 A_Firecustommissile("50CaseSpawn",0,0,-12,-18)
			CHAG A 0 A_SpawnItemEx("PlayerMuzzle3",30,5,27)
			TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles", random(-12,12), 0, 0, -6, 0, random(-9,9))
			//CHAF A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", random(-2,2), 0, 0, -12, 0, random(-2,2))
			CHAG A 0 A_FireCustomMissile("SmokeSpawner11",0,0,0,0)
			CHAG A 0 A_ZoomFactor(1.0)
			CHAG A 0 A_JumpIfInventory("IsTacticalClass", 1, 2)//Tactical mode skips a frame, fires faster
			CHAF D 1 A_SetPitch(Pitch-0.2, SPF_INTERPOLATE)
			CHAG A 0
			
			RIFG A 0 A_JumpIfInventory("IsNOTTacticalClass", 1, 2)//tactical mode has muzzle climb
			RIFG A 0 A_SetPitch(pitch-1.0, SPF_INTERPOLATE)
			RIFG A 0
			
			NULL A 0 A_WeaponOffset(0,32)
			MNGG B 0 A_ReFire("hold")
			CHAG A 0 A_PlaySound("MINIGEN", 5)
			CHAG A 0 A_JumpIfInventory("Spin",1,"Ready2")	
		 CHAG A 0 A_PlaySound("CHAINSTO") XXXX X 0 A_StartSound("foley/MinigunInspectRotor", 10,0,0.9)
		 TNT1 A 0 A_Overlay(4,"MinigunSmoke")
		 CHAG ABCDABCDABCD 1 A_ReFire("Hold")	
		 
		EndFire2:
		NULL A 0 A_JumpIf(CountInv("Clip2")==0,"NoAmmoFireEnd2")
		 CHAG AABBCCDDAABBCCDD 1 
		{
			A_WeaponReady(WRF_ALLOWRELOAD);
			A_ReFire("Fire2");
			if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
			if (CountInv("Taunting") == 1) { return state("Taunt"); }
			if (CountInv("Reloading") == 1) { return state("Reload"); }
			if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
			A_checksprint;
			if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
			if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			if (CountInv("StartDualWield") == 1) { return state("DualWield"); }
			return state("");
		}
		EndFire3:
		NULL A 0 A_JumpIf(CountInv("Clip2")==0,"NoAmmoFireEnd3")
		 CHAG AAABBBCCCDDD 1 
		{
			A_WeaponReady(WRF_ALLOWRELOAD);
			A_ReFire("Fire");
			if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
			if (CountInv("Taunting") == 1) { return state("Taunt"); }
			if (CountInv("Reloading") == 1) { return state("Reload"); }
			if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
			A_checksprint;
			if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
			if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			if (CountInv("StartDualWield") == 1) { return state("DualWield"); }
			return state("");
		}
		Goto Ready
		
		NoAmmoFire:
		CHAG A 0 A_PlaySound("CHAINSTA")
		TNT1 A 0 A_PlaySound("weapons/empty", 4)
		CHAE AB 3
		TNT1 A 0 A_PlaySound("weapons/empty", 4)
		CHAE CD 3
		TNT1 A 0 A_ReFire("Fire2")
		CHAG A 0 A_PlaySound("CHAINSTO") XXXX X 0 A_StartSound("foley/MinigunInspectRotor", 10,0,0.9)
		Goto EndFire3
		NoAmmoFire2:
		TNT1 A 0 A_PlaySound("weapons/empty", 4)
		CHAE AB 2
		TNT1 A 0 A_PlaySound("weapons/empty", 4)
		CHAE CD 2
		TNT1 A 0 A_ReFire("Hold")
		CHAG A 0 A_PlaySound("CHAINSTO") XXXX X 0 A_StartSound("foley/MinigunInspectRotor", 10,0,0.9)
		Goto EndFire2
		NoAmmoHold:
		TNT1 A 0 A_PlaySound("weapons/empty", 4)
		CHAE A 1
		TNT1 A 0 A_PlaySound("weapons/empty", 4)	
		NoAmmoHold2:
		CHAE C 1
		TNT1 A 0 A_PlaySound("weapons/empty", 4)
		TNT1 A 0 A_ReFire("Hold")
		CHAG A 0 A_JumpIfInventory("Spin",1,"Ready2Empty")
		CHAG A 0 A_PlaySound("CHAINSTO") XXXX X 0 A_StartSound("foley/MinigunInspectRotor", 10,0,0.9)
		CHAE ABCDABCDABCD 1 A_ReFire("Hold")
		NoAmmoFireEnd2:
		CHAE AABBCCDDAABBCCDD 1 
		{
			A_WeaponReady;
			A_ReFire("Fire2");
			if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
			if (CountInv("Taunting") == 1) { return state("Taunt"); }
			if (CountInv("Reloading") == 1) { return state("Reload"); }
			if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
			A_checksprint;
			if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
			if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			if (CountInv("StartDualWield") == 1) { return state("DualWield"); }
			return state("");
		}
		NoAmmoFireEnd3:
		CHAE AAABBBCCCDDD 1 
		{
			A_WeaponReady;
			A_ReFire("Fire");
			if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
			if (CountInv("Taunting") == 1) { return state("Taunt"); }
			if (CountInv("Reloading") == 1) { return state("Reload"); }
			if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
			A_checksprint;
			if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
			if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			if (CountInv("StartDualWield") == 1) { return state("DualWield"); }
			return state("");
		}
		Goto IdleNoAmmo
		
		
		
		
		
		
		
		MinigunSmoke:
            TNT1 AAAAAAAAAAAA 5 A_FireCustomMissile("SmokeSpawner11",0,0,0,0)
			stop

	  AltFire:
	     TNT1 A 0 A_JumpIf(CountInv("Clip2")==0,"AltFireNoAmmo")
		 CHAG A 0 A_JumpIfInventory("Spin",1,"StopAlt")
		 CHAG A 0 A_GiveInventory ("Spin",1)
		 CHAG A 0 A_PlaySound("CHAINSTA", 5)
		 CHAG ABCDAB 3 
		 CHAG CDABCD 2		 
		 Goto Ready2

	  StopAlt:
		 CHAG A 0
		 CHAG A 0 A_TakeInventory ("Spin",1)
		 CHAG A 0 A_PlaySound("CHAINSTO", 6)
		 CHAG A 0 A_StopSound(5)
		 CHAG A 0 A_StopSound(1)
		 CHAG ABCD 1
		 CHAG ABCDABCD 2 A_WeaponReady
		 CHAG ABCD 3 A_WeaponReady
		 CHAG A 0
		 Goto Ready
		 
	AltFireNoAmmo:
		 CHAG A 0 A_JumpIfInventory("Spin",1,"StopAltNoAmmo")
		 CHAG A 0 A_GiveInventory ("Spin",1)
		 CHAG A 0 A_PlaySound("CHAINSTA", 5)
		 CHAE ABCDAB 3 
		 CHAE CDABCD 2		 
		 Goto Ready2Empty

	  StopAltNoAmmo:
		 CHAG A 0
		 CHAG A 0 A_TakeInventory ("Spin",1)
		 CHAG A 0 A_PlaySound("CHAINSTO", 6)
		 CHAG A 0 A_StopSound(5)
		 CHAG A 0 A_StopSound(1)
		 CHAE ABCD 1
		 CHAE ABCDABCD 2 A_WeaponReady
		 CHAE ABCD 3 A_WeaponReady
		 CHAG A 0
		 Goto Ready
		 
		 
		 
	
		PuristGun:
			TNT1 A 1
			CHAG A 0 A_GiveInventory("ClassicChaingun", 1)
			CHAG A 0 A_TakeInventory("MiniGun", 1)
			TNT1 A 10
			Goto Ready2	
				
		DualWield:
		TNT1 A 0 A_TakeInventory("StartDualWield",1)
		TNT1 A 0 A_GiveInventory("Nailgun",1)
		TNT1 A 0 A_StopSound(5)
		CHAG A 0 A_JumpIfInventory("Clip2",1,2)
		Goto DualWieldNoAmmo
		TNT1 A 0
		NLGN BBCDE 1
		NLGN F 2
		NLGN F 1 offset(0,33)
		NLGN F 1 offset(0,32)
		NLGN F 1 offset(0,33)
		NLGN F 1 offset(0,32)
		NLGN F 1 offset(0,33)
		XXXX X 0 A_PlaySound("foley/NailgunToMinigun", 10)
		NLGN F 1 offset(0,32)
		// barrel left the gun
		TNT1 A 0 A_PlaySound("MODULE1",1)
		NLGN GHII 1
		NLGN J 4
		NLGN KKLMN 1
		ContinueRemoval:
		NLGN O 6
		NLGN PQRSS 1
		NLGN T 5
		NLGN UV 1
		TNT1 A 0 A_GiveInventory("SwitchingDualModes", 1)
		TNT1 A 0 A_GiveInventory("NailgunModuleSelected",1)
		//NULL A 0 A_SetCVAR("bd_NailgunModule",true)
		TNT1 A 0 A_TakeInventory("StartDualWield",1)
		TNT1 A 0 A_SelectWeapon("Nailgun")
		TNT1 A 0 A_WeaponReady
		goto Ready
		
		DualWieldNoAmmo:
		5LGN MLKJI 1
		5LGN I 2
		5LGN I 1 offset(0,33)
		5LGN I 1 offset(0,32)
		5LGN I 1 offset(0,33)
		5LGN I 1 offset(0,32)
		5LGN I 1 offset(0,33)
		5LGN I 1 offset(0,32)
		TNT1 A 0 A_PlaySound("MODULE1",1)
		5LGN HGFF 1
		5LGN E 4
		5LGN DDCBA 1
		Goto ContinueRemoval
		
		
	LegacyFireNoAmmo:
	CHAG A 0 A_PlaySound("CHAINSTA", 5)
	CHAG A 0 BRIGHT A_FireCustomMissile("Alerter", 0, 0, 0, 0)
	CHAE BC 1
	CHAE D 1
	CHAE AB 1
	CHAG A 0 A_StopSound(5)
	LegacyHoldNoAmmo:
	TNT1 A 0 A_PlaySound("weapons/empty", 4)
	CHAE A 1
	LegacyHoldNoAmmo2:
	TNT1 A 0 A_PlaySound("weapons/empty", 4)	
	CHAE C 1	
	MNGG B 0 A_ReFire("LegacyHold")
	CHAG A 0 A_PlaySound("MINIGEN", 5)
    CHAG A 0 A_JumpIfInventory("Spin",1,"Ready2Empty")
	CHAG A 0 A_PlaySound("CHAINSTO", 5)
	CHAE ABCDAB 1
	{
	A_WeaponReady;
	if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
	if (CountInv("Taunting") == 1) { return state("Taunt"); }
	if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
	A_checksprint;
	if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
    if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
	return state("");
	}
	CHAE CDABCDABCD 2
	{
	A_WeaponReady;
	if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
	if (CountInv("Taunting") == 1) { return state("Taunt"); }
	if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
	A_checksprint;
	if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
	if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
	return state("");
	}
	CHAE ABCD 3
	{
	A_WeaponReady;
	if (CountInv("TossGrenade") == 1) { return state("TossGrenade"); }
	if (CountInv("Taunting") == 1) { return state("Taunt"); }
	if (CountInv("Salute1") == 1 || CountInv("Salute2") == 1) { return state("Salute"); }
	A_checksprint;
	if (CountInv("ExecuteDownedEnemy") == 1) { return state("DoExecution"); }
	if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
	return state("");
	}
	Goto IdleNoAmmo
	
	
//Old fire
     LegacyFire:
			CHAG A 0
			CHAG A 0 A_JumpIfInventory("Spin",1,"LegacyHold")
		NULL A 0 A_JumpIf(CountInv("Clip2")==0,"LegacyFireNoAmmo")
			CHAG A 0 A_PlaySound("CHAINSTA", 5)
			CHAG A 0 BRIGHT A_FireCustomMissile("Alerter", 0, 0, 0, 0)
			CHAG BC 1
			CHAG D 1
			CHAG AB 1
			CHAG A 0 A_StopSound(5)
			//CHAG A 0 A_PlaySound("CHAINSPI", 5)
			CHAG A 0
		LegacyHold:
			CHAG A 0 A_JumpIfInventory("Salute1", 1, "Salute")
			CHAG A 0 A_JumpIfInventory("Salute2", 1, "Salute")
		NULL A 0 A_JumpIf(CountInv("Clip2")==0,"LegacyHoldNoAmmo")
			CHAG A 0 A_PlaySound("CHGNSHOT", 1)
			CHAG A 0 A_PlaySound("FARMGN", 5)
			"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("Clip2")<=15) { A_PlaySound("MagClick", 7); }}}
			CHAG A 0 A_ZoomFactor(0.99)
			CHAF A 1 BRIGHT A_FireBullets(5, 5, -1, 16, "MachineGunBulletPuff", FBF_NORANDOM | FBF_USEAMMO)
			TNT1 A 0 A_SetPitch(Pitch-0.2, SPF_INTERPOLATE)
			TNT1 A 0 A_SetAngle(angle + frandom(-0.6,0.6), SPF_INTERPOLATE)

			CHAG A 0 A_Firecustommissile("50CaseSpawn",0,0,-12,-18)
			CHAG A 0 A_SpawnItemEx("PlayerMuzzle2",30,5,27)
			TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles2", random(-12,12), 0, 0, -6, 0, random(-9,9))
			CHAF A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", random(-2,2), 0, 0, -12, 0, random(-2,2))
			CHAG A 0 A_ZoomFactor(1.0)
			CHAG A 0 A_JumpIfInventory("IsTacticalClass", 1, 2)//Tactical mode skips a frame, fires faster
			CHAF B 1 A_SetPitch(Pitch-0.2, SPF_INTERPOLATE)
			CHAG A 0
			
			RIFG A 0 A_JumpIfInventory("IsNOTTacticalClass", 1, 2)//tactical mode has muzzle climb
			RIFG A 0 A_SetPitch(pitch-1.0, SPF_INTERPOLATE)
			RIFG A 0
		NULL A 0 A_JumpIf(CountInv("Clip2")==0,"LegacyHoldNoAmmo2")	
			CHAG A 0 A_PlaySound("CHGNSHOT", 1)
			CHAG A 0 A_PlaySound("FARMGN", 5)
			"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("Clip2")<=15) { A_PlaySound("MagClick", 7); }}}
			CHAG A 0 A_ZoomFactor(0.99)
			//TNT1 AA 0 A_FireCustomMissile("YellowFlareSpawn",0,0,0,0)
			//RIFF A 0 A_FireCustomMissile("GunFireSmoke", 0, 0, 0, -5, 0, 0)
			CHAF C 1 BRIGHT A_FireBullets(5, 5, -1, 16, "MachineGunBulletPuff", FBF_NORANDOM | FBF_USEAMMO)
			TNT1 A 0 A_SetAngle(angle+frandom(-0.6,0.6), SPF_INTERPOLATE)
			TNT1 A 0 A_SetPitch(Pitch-0.2, SPF_INTERPOLATE)
			CHAG A 0 A_Firecustommissile("50CaseSpawn",0,0,-12,-18)
			CHAG A 0 A_SpawnItemEx("PlayerMuzzle3",30,5,27)
			TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles", random(-12,12), 0, 0, -6, 0, random(-9,9))
			CHAF A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", random(-2,2), 0, 0, -12, 0, random(-2,2))
			CHAG A 0 A_FireCustomMissile("SmokeSpawner11",0,0,0,0)
			CHAG A 0 A_ZoomFactor(1.0)
			CHAG A 0 A_JumpIfInventory("IsTacticalClass", 1, 2)//Tactical mode skips a frame, fires faster
			CHAF D 1 A_SetPitch(Pitch-0.2, SPF_INTERPOLATE)
			CHAG A 0
			
			RIFG A 0 A_JumpIfInventory("IsNOTTacticalClass", 1, 2)//tactical mode has muzzle climb
			RIFG A 0 A_SetPitch(pitch-1.0, SPF_INTERPOLATE)
			RIFG A 0
			
			
			MNGG B 0 A_ReFire("LegacyHold")
			CHAG A 0 A_PlaySound("MINIGEN", 5)
			CHAG A 0 A_JumpIfInventory("Spin",1,"Ready2")
			
TNT1 A 0  {if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			return state("");
			}
			CHAG A 0 A_JumpIfInventory("Salute1", 1, "Salute")
		 CHAG A 0 A_JumpIfInventory("Salute2", 1, "Salute")
		 CHAG A 0 A_PlaySound("CHAINSTO", 5)
		 CHAG A 1 A_WeaponReady
		
		 CHAG B 1 A_WeaponReady
		 CHAG A 0 A_checksprint
		 CHAG A 0 A_Refire
		
		 CHAG C 1 A_WeaponReady
		 CHAG A 0 A_FireCustomMissile("SmokeSpawner11",0,0,0,0)
		 CHAG D 1 A_WeaponReady
				

TNT1 A 0  {if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			return state("");
			}
		 CHAG A 0 A_JumpIfInventory("Salute1", 1, "Salute")
		 CHAG A 0 A_JumpIfInventory("Salute2", 1, "Salute")
		 CHAG A 1 A_WeaponReady
		 CHAG A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
TNT1 A 0  {if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			return state("");
			}
		 CHAG A 0 A_checksprint
		
		 CHAG B 1 A_WeaponReady
		 CHAG A 0 A_FireCustomMissile("SmokeSpawner11",0,0,0,0)
		 CHAG C 2 A_WeaponReady
		
		 CHAG D 2 A_WeaponReady
		 CHAG A 0 A_FireCustomMissile("SmokeSpawner11",0,0,0,0)
		 CHAG A 0 A_JumpIfInventory("Spin",1,"Ready2") 
		 CHAG A 0 A_TakeInventory("Spin", 1)
		 CHAG A 0 A_JumpIfInventory("Salute1", 1, "Salute")
		 CHAG A 0 A_JumpIfInventory("Salute2", 1, "Salute")
		 CHAG A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
TNT1 A 0  {if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			return state("");
			}	 
			CHAG A 0 A_checksprint
		 
		 CHAG A 2 A_WeaponReady
		
		 CHAG B 2 A_WeaponReady
		 CHAG A 0 A_FireCustomMissile("SmokeSpawner11",0,0,0,0)
		 CHAG C 2 A_WeaponReady
		
		 CHAG D 2 A_WeaponReady
		 CHAG A 0 A_FireCustomMissile("SmokeSpawner11",0,0,0,0)
		 CHAG A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
TNT1 A 0  {if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			return state("");
			}	 
			CHAG A 0 A_checksprint
		 CHAG ABCD 2 A_WeaponReady
		 CHAG A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
TNT1 A 0  {if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			return state("");
			}
			CHAG A 0 A_checksprint
		 CHAG ABCD 3 A_WeaponReady
		 RIFG A 0 A_Takeinventory("StartDualWield",1)
		 
		 goto Ready		
		 
		 
		 Placeturret:
		 TNT1 A 0 A_takeinventory("swapriflespecial",1)
		 TNT1 A 0 A_jumpifinventory("clip2",1,1)
		 Goto ready
		  CHGT ABC 1
		  TNT1 A 0
		  {
		  A_takeinventory("spin",1);
		  A_playsound("CBOXPKUP",6);
		  A_spawnitemex("minigunturret",60,0,0,2,0,5,0,SXF_NOCHECKPOSITION | SXF_SETTRACER);
		 // A_takeinventory("clip2",100);
		  A_takeinventory("miniguncount",1);
		  
		  
		  }
		  TNT1 A 10
		  TNT1 A 0 A_jumpifinventory("miniguncount",1,"Andbackagain")
		  TNT1 A 0 A_takeinventory("minigun",1)
		  Goto ready
		  
		  Andbackagain:
			CHAG A 0 A_JumpIfInventory("Clip2",1,"backagainButHasAmmo")
			CHGS EDCBA 1 
			RIFG A 0 A_Takeinventory("StartDualWield",1)
			Goto IdleNoAmmo
        backagainButHasAmmo:
		CHGS EDCGF 1 
		Goto ready
		
		
		}
}

